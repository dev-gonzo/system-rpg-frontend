#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Verificar se está tentando fazer bypass do Husky
if [ "$HUSKY_SKIP_HOOKS" = "1" ] || [ "$HUSKY_SKIP_INSTALL" = "1" ]; then
    echo " Bypass do Husky detectado e bloqueado!"
    echo "Remova HUSKY_SKIP_HOOKS ou HUSKY_SKIP_INSTALL e tente novamente."
    exit 1
fi

# Verificar argumentos de bypass no git push
if echo "$@" | grep -q "\-\-no-verify\|\-\-force\|\-f"; then
    echo " Flags de bypass (--no-verify, --force, -f) detectadas e bloqueadas!"
    echo "Todos os pushes devem passar pelas verificações do Husky."
    exit 1
fi

npm run verify